# 要件定義書: 助成金申請・管理支援システム（プロトタイプ）

**ドキュメントバージョン:** 1.0
**最終更新日:** 2025-12-24
**プロジェクト:** 株式会社div / TM人事労務コンサルティング株式会社 共同プロジェクト

---

## 1. プロジェクト概要
顧客企業が助成金（まずは「キャリアアップ助成金」）を申請する際の手続きを自動化・効率化するWebアプリケーションを開発する。
現状、アナログ（メール・電話）で行われている書類回収、要件確認、期限管理をシステム化し、顧客の負担軽減とTM人事労務コンサルティング側の業務効率化（ヒューマンエラー削減）を目指す。

**目標:** 2026年1月6日の次回ミーティングまでに、コア機能が動作するプロトタイプを完成させる。

---

## 2. ユーザー定義
### 2.1 エンドユーザー（顧客企業）
* **属性:** 中小企業の経営者や総務担当者。
* **ITリテラシー:** 必ずしも高くない（地方の高齢な社長など、PC操作に不慣れな層も含む）。
* **利用シーン:** 必要書類のアップロード、不足情報の入力、申請期限の確認、完成書類のダウンロード。

### 2.2 管理者（TM人事労務コンサルティング）
* **利用シーン:** 顧客の申請進捗確認、期限のオーバーライド（修正）、AI判定結果の最終確認。

---

## 3. 機能要件

### 3.1 認証・ユーザー管理
* **ログイン/登録:** 顧客企業ごとのアカウント管理。
* **企業情報管理:** 会社名、代表者名、所在地などの基本情報管理（一度入力すれば申請書類に自動転記される）。

### 3.2 助成金申請フロー（メイン機能）
* **助成金選択:** 申請したい助成金を選択するメニュー。
    * *フェーズ1対象:* 「キャリアアップ助成金」
    * *将来的な拡張:* 「両立支援等助成金」「人材確保等支援助成金」など複数に対応可能な設計とする。
* **並行申請:** 1つの企業が複数の助成金を同時に進行可能にする。

### 3.3 書類アップロードとAI解析 (Core)
* **UI:** 「就業規則」「出勤簿」など、指定された書類をドラッグ＆ドロップでアップロードする画面。
* **LLM解析（AIチェック）:** アップロードされたPDF（特に就業規則）の内容をAIが読み取り、助成金受給要件を満たしているか判定する。
    * *例:* 「キャリアアップ助成金」の場合、特定の条文が含まれているかチェックし、不足していれば「〇〇の規定が足りません」とフィードバックを表示する。
    * *技術要件:* OpenAI API または Anthropic API を利用（従量課金APIキー設定）。

### 3.4 書類自動作成・出力
* **自動入力:** 顧客情報とアップロード内容、AIが抽出したデータを元に、申請様式（PDF）の入力欄を自動で埋める。
* **出力形式:** 印刷してそのまま提出可能なPDF形式でダウンロード可能にする。

### 3.5 期限管理・リマインド
* **自動計算ロジック:** 助成金のルールに基づき、イベント発生日から期限を自動算出する。
    * *ロジック例:* 「賃金改定日」等の入力 → 「6ヶ月間の支給実績」 → 「申請可能期間（2ヶ月間）」を自動計算して表示。
* **アラート表示:** 期限が迫っている場合、ダッシュボード上で警告を表示する。
* **管理者修正:** イレギュラーなケースに対応するため、管理者が手動で期限日を変更できる機能を設ける。

### 3.6 その他（将来構想・Nice to have）
* **Zoom Phone連携:** リマインドメールに反応がない場合、自動音声で電話発信を行う（今回はスコープ外だが、将来的な拡張性を考慮）。

---

## 4. 非機能要件
* **UI/UX:** ITに不慣れなユーザーでも迷わない、極めてシンプルなインターフェース（直感的なボタン配置、大きな文字など）。
* **拡張性:** 助成金の種類やルール（年度ごとの法改正）が追加・変更されやすいため、ルール部分をメンテナンスしやすい構造にする。

---

## 5. 推奨技術スタック（Claude Codeへの指示用）
* **Frontend:** Next.js (App Router), TypeScript, Tailwind CSS
* **Backend:** Next.js Server Actions
* **Database:** Supabase (PostgreSQL)
* **AI/LLM:** gemini API
* **PDF処理:** `pdf-parse` (解析用), `pdf-lib` (生成用) など

---

## 6. 開発マイルストーン（プロトタイプ）

1.  **Scaffolding:** プロジェクト基盤、ログイン画面、ダッシュボード構築。
2.  **File Upload:** PDFアップロード機能とDB連携。
3.  **AI Logic:** アップロードされた就業規則をLLMに投げ、フィードバックを得る処理の実装。
4.  **Deadline Logic:** 日付入力に基づく期限計算ロジックの実装。
5.  **PDF Generation:** 簡易的なPDF出力機能の実装。